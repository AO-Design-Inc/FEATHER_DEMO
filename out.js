(()=>{var Gn=Object.create;var Un=Object.defineProperty;var qn=Object.getOwnPropertyDescriptor;var Xn=Object.getOwnPropertyNames;var $n=Object.getPrototypeOf,Wn=Object.prototype.hasOwnProperty;var Kn=p=>Un(p,"__esModule",{value:!0});var zn=(p,E)=>()=>(E||p((E={exports:{}}).exports,E),E.exports);var Zn=(p,E,Y)=>{if(E&&typeof E=="object"||typeof E=="function")for(let C of Xn(E))!Wn.call(p,C)&&C!=="default"&&Un(p,C,{get:()=>E[C],enumerable:!(Y=qn(E,C))||Y.enumerable});return p},Dn=p=>Zn(Kn(Un(p!=null?Gn($n(p)):{},"default",p&&p.__esModule&&"default"in p?{get:()=>p.default,enumerable:!0}:{value:p,enumerable:!0})),p);var kn=zn(jn=>{(function(p,E){typeof define=="function"&&define.amd?define([],function(){return E.call(p)}):p.webglUtils=E.call(p)})(jn,function(){"use strict";let p=this;function E(n){return n=n||p,n!==n.top}E()||(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","https://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));function Y(n){p.console&&(p.console.error?p.console.error(n):p.console.log&&p.console.log(n))}function C(n,a,t,v){let u=v||Y,m=n.createShader(t);if(n.shaderSource(m,a),n.compileShader(m),!n.getShaderParameter(m,n.COMPILE_STATUS)){let l=n.getShaderInfoLog(m);return u("*** Error compiling shader '"+m+"':"+l+`
`+a.split(`
`).map((c,s)=>`${s+1}: ${c}`).join(`
`)),n.deleteShader(m),null}return m}function K(n,a,t,v,u){let m=u||Y,f=n.createProgram();if(a.forEach(function(c){n.attachShader(f,c)}),t&&t.forEach(function(c,s){n.bindAttribLocation(f,v?v[s]:s,c)}),n.linkProgram(f),!n.getProgramParameter(f,n.LINK_STATUS)){let c=n.getProgramInfoLog(f);return m("Error in program linking:"+c),n.deleteProgram(f),null}return f}function en(n,a,t,v){let u="",m,f=document.getElementById(a);if(!f)throw"*** Error: unknown script element"+a;if(u=f.text,!t){if(f.type==="x-shader/x-vertex")m=n.VERTEX_SHADER;else if(f.type==="x-shader/x-fragment")m=n.FRAGMENT_SHADER;else if(m!==n.VERTEX_SHADER&&m!==n.FRAGMENT_SHADER)throw"*** Error: unknown shader type"}return C(n,u,t||m,v)}let tn=["VERTEX_SHADER","FRAGMENT_SHADER"];function pn(n,a,t,v,u){let m=[];for(let f=0;f<a.length;++f)m.push(en(n,a[f],n[tn[f]],u));return K(n,m,t,v,u)}function an(n,a,t,v,u){let m=[];for(let f=0;f<a.length;++f)m.push(C(n,a[f],n[tn[f]],u));return K(n,m,t,v,u)}function O(n,a){if(a===n.SAMPLER_2D)return n.TEXTURE_2D;if(a===n.SAMPLER_CUBE)return n.TEXTURE_CUBE_MAP}function ln(n,a){let t=0;function v(f,l){let c=n.getUniformLocation(f,l.name),s=l.type,A=l.size>1&&l.name.substr(-3)==="[0]";if(s===n.FLOAT&&A)return function(h){n.uniform1fv(c,h)};if(s===n.FLOAT)return function(h){n.uniform1f(c,h)};if(s===n.FLOAT_VEC2)return function(h){n.uniform2fv(c,h)};if(s===n.FLOAT_VEC3)return function(h){n.uniform3fv(c,h)};if(s===n.FLOAT_VEC4)return function(h){n.uniform4fv(c,h)};if(s===n.INT&&A)return function(h){n.uniform1iv(c,h)};if(s===n.INT)return function(h){n.uniform1i(c,h)};if(s===n.INT_VEC2)return function(h){n.uniform2iv(c,h)};if(s===n.INT_VEC3)return function(h){n.uniform3iv(c,h)};if(s===n.INT_VEC4)return function(h){n.uniform4iv(c,h)};if(s===n.BOOL)return function(h){n.uniform1iv(c,h)};if(s===n.BOOL_VEC2)return function(h){n.uniform2iv(c,h)};if(s===n.BOOL_VEC3)return function(h){n.uniform3iv(c,h)};if(s===n.BOOL_VEC4)return function(h){n.uniform4iv(c,h)};if(s===n.FLOAT_MAT2)return function(h){n.uniformMatrix2fv(c,!1,h)};if(s===n.FLOAT_MAT3)return function(h){n.uniformMatrix3fv(c,!1,h)};if(s===n.FLOAT_MAT4)return function(h){n.uniformMatrix4fv(c,!1,h)};if((s===n.SAMPLER_2D||s===n.SAMPLER_CUBE)&&A){let h=[];for(let w=0;w<info.size;++w)h.push(t++);return function(w,T){return function(S){n.uniform1iv(c,T),S.forEach(function(F,y){n.activeTexture(n.TEXTURE0+T[y]),n.bindTexture(w,F)})}}(O(n,s),h)}if(s===n.SAMPLER_2D||s===n.SAMPLER_CUBE)return function(h,w){return function(T){n.uniform1i(c,w),n.activeTexture(n.TEXTURE0+w),n.bindTexture(h,T)}}(O(n,s),t++);throw"unknown type: 0x"+s.toString(16)}let u={},m=n.getProgramParameter(a,n.ACTIVE_UNIFORMS);for(let f=0;f<m;++f){let l=n.getActiveUniform(a,f);if(!l)break;let c=l.name;c.substr(-3)==="[0]"&&(c=c.substr(0,c.length-3));let s=v(a,l);u[c]=s}return u}function fn(n,...a){n=n.uniformSetters||n;for(let t of a)Object.keys(t).forEach(function(v){let u=n[v];u&&u(t[v])})}function cn(n,a){let t={};function v(m){return function(f){if(f.value)switch(n.disableVertexAttribArray(m),f.value.length){case 4:n.vertexAttrib4fv(m,f.value);break;case 3:n.vertexAttrib3fv(m,f.value);break;case 2:n.vertexAttrib2fv(m,f.value);break;case 1:n.vertexAttrib1fv(m,f.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else n.bindBuffer(n.ARRAY_BUFFER,f.buffer),n.enableVertexAttribArray(m),n.vertexAttribPointer(m,f.numComponents||f.size,f.type||n.FLOAT,f.normalize||!1,f.stride||0,f.offset||0)}}let u=n.getProgramParameter(a,n.ACTIVE_ATTRIBUTES);for(let m=0;m<u;++m){let f=n.getActiveAttrib(a,m);if(!f)break;let l=n.getAttribLocation(a,f.name);t[f.name]=v(l)}return t}function vn(n,a){n=n.attribSetters||n,Object.keys(a).forEach(function(t){let v=n[t];v&&v(a[t])})}function mn(n,a,t,v){let u=n.createVertexArray();return n.bindVertexArray(u),vn(a,t),v&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,v),n.bindVertexArray(null),u}function hn(n,a,t){return mn(n,a.attribSetters||a,t.attribs,t.indices)}function un(n,a,t,v,u){a=a.map(function(c){let s=document.getElementById(c);return s?s.text:c});let m=an(n,a,t,v,u);if(!m)return null;let f=ln(n,m),l=cn(n,m);return{program:m,uniformSetters:f,attribSetters:l}}function sn(n,a,t){vn(a,t.attribs),t.indices&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indices)}let En=["","MOZ_","OP_","WEBKIT_"];function rn(n,a){for(let t=0;t<En.length;++t){let v=En[t]+a,u=n.getExtension(v);if(u)return u}}function b(n,a){a=a||1;let t=n.clientWidth*a|0,v=n.clientHeight*a|0;return n.width!==t||n.height!==v?(n.width=t,n.height=v,!0):!1}function x(n,a){let t=0;return n.push=function(){for(let v=0;v<arguments.length;++v){let u=arguments[v];if(u instanceof Array||u.buffer&&u.buffer instanceof ArrayBuffer)for(let m=0;m<u.length;++m)n[t++]=u[m];else n[t++]=u}},n.reset=function(v){t=v||0},n.numComponents=a,Object.defineProperty(n,"numElements",{get:function(){return this.length/this.numComponents|0}}),n}function M(n,a,t){let v=t||Float32Array;return x(new v(n*a),n)}function _(n,a,t,v){t=t||n.ARRAY_BUFFER;let u=n.createBuffer();return n.bindBuffer(t,u),n.bufferData(t,a,v||n.STATIC_DRAW),u}function g(n){return n!=="indices"}function U(n){let a={};return Object.keys(n).filter(g).forEach(function(t){a["a_"+t]=t}),a}function W(n,a){if(a instanceof Int8Array)return n.BYTE;if(a instanceof Uint8Array)return n.UNSIGNED_BYTE;if(a instanceof Int16Array)return n.SHORT;if(a instanceof Uint16Array)return n.UNSIGNED_SHORT;if(a instanceof Int32Array)return n.INT;if(a instanceof Uint32Array)return n.UNSIGNED_INT;if(a instanceof Float32Array)return n.FLOAT;throw"unsupported typed array type"}function L(n){return n instanceof Int8Array||n instanceof Uint8Array}function Z(n){return n.buffer&&n.buffer instanceof ArrayBuffer}function on(n,a){let t;if(n.indexOf("coord")>=0?t=2:n.indexOf("color")>=0?t=4:t=3,a%t>0)throw"can not guess numComponents. You should specify it.";return t}function An(n,a){if(Z(n))return n;if(n.data&&Z(n.data))return n.data;Array.isArray(n)&&(n={data:n}),n.numComponents||(n.numComponents=on(a,n.length));let t=n.type;t||a==="indices"&&(t=Uint16Array);let v=M(n.numComponents,n.data.length/n.numComponents|0,t);return v.push(n.data),v}function yn(n,a,t){let v=t||U(a),u={};return Object.keys(v).forEach(function(m){let f=v[m],l=a[f];if(l.value)u[m]={value:l.value};else{let c=An(l,f);u[m]={buffer:_(n,c),numComponents:l.numComponents||c.numComponents||on(f),type:W(n,c),normalize:L(c)}}}),u}function xn(n){return n.length?n:n.data}let wn=/coord|texture/i,_n=/color|colour/i;function on(n,a){let t;if(wn.test(n)?t=2:_n.test(n)?t=4:t=3,a%t>0)throw new Error(`Can not guess numComponents for attribute '${n}'. Tried ${t} but ${a} values is not evenly divisible by ${t}. You should specify it.`);return t}function B(n,a){return n.numComponents||n.size||on(a,xn(n).length)}let bn=["position","positions","a_position"];function J(n){let a;for(let f of bn)if(f in n){a=f;break}a=a||Object.keys(n)[0];let t=n[a],v=xn(t).length,u=B(t,a),m=v/u;if(v%u>0)throw new Error(`numComponents ${u} not correct for length ${v}`);return m}function Q(n,a,t){let v={attribs:yn(n,a,t)},u=a.indices;return u?(u=An(u,"indices"),v.indices=_(n,u,n.ELEMENT_ARRAY_BUFFER),v.numElements=u.length):v.numElements=J(a),v}function On(n,a){let t={};return Object.keys(a).forEach(function(v){let u=v==="indices"?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER,m=An(a[v],name);t[v]=_(n,m,u)}),a.indices?t.numElements=a.indices.length:a.position&&(t.numElements=a.position.length/3),t}function gn(n,a,t,v,u){let m=a.indices;t=t===void 0?n.TRIANGLES:t;let f=v===void 0?a.numElements:v;u=u===void 0?0:u,m?n.drawElements(t,f,n.UNSIGNED_SHORT,u):n.drawArrays(t,u,f)}function e(n,a){let t=null,v=null;a.forEach(function(u){let m=u.programInfo,f=u.bufferInfo,l=!1;m!==t&&(t=m,n.useProgram(m.program),l=!0),(l||f!==v)&&(v=f,sn(n,m.attribSetters,f)),fn(m.uniformSetters,u.uniforms),gn(n,f)})}function r(n,a){let t=[];for(let v in n)n[v]===a&&t.push(v);return t.length?t.join(" | "):`0x${a.toString(16)}`}return!!!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=function(n){return function(){let a=arguments;return a[0]==="webgl"&&(a=[].slice.call(arguments),a[0]="experimental-webgl"),n.apply(this,a)}}(HTMLCanvasElement.prototype.getContext)),{createAugmentedTypedArray:M,createAttribsFromArrays:yn,createBuffersFromArrays:On,createBufferInfoFromArrays:Q,createAttributeSetters:cn,createProgram:K,createProgramFromScripts:pn,createProgramFromSources:an,createProgramInfo:un,createUniformSetters:ln,createVAOAndSetAttributes:mn,createVAOFromBufferInfo:hn,drawBufferInfo:gn,drawObjectList:e,glEnumToString:r,getExtensionWithKnownPrefixes:rn,resizeCanvasToDisplaySize:b,setAttributes:vn,setBuffersAndAttributes:sn,setUniforms:fn}})});var Yn=zn(Hn=>{(function(p,E){typeof define=="function"&&define.amd?define([],E):p.m4=E()})(Hn,function(){"use strict";let p=Float32Array;function E(e){let r=p;return p=e,r}function Y(e,r,o){o=o||new p(16);var i=r[0*4+0],n=r[0*4+1],a=r[0*4+2],t=r[0*4+3],v=r[1*4+0],u=r[1*4+1],m=r[1*4+2],f=r[1*4+3],l=r[2*4+0],c=r[2*4+1],s=r[2*4+2],A=r[2*4+3],h=r[3*4+0],w=r[3*4+1],T=r[3*4+2],S=r[3*4+3],F=e[0*4+0],y=e[0*4+1],R=e[0*4+2],I=e[0*4+3],P=e[1*4+0],V=e[1*4+1],N=e[1*4+2],z=e[1*4+3],D=e[2*4+0],j=e[2*4+1],G=e[2*4+2],q=e[2*4+3],X=e[3*4+0],$=e[3*4+1],d=e[3*4+2],nn=e[3*4+3];return o[0]=i*F+n*P+a*D+t*X,o[1]=i*y+n*V+a*j+t*$,o[2]=i*R+n*N+a*G+t*d,o[3]=i*I+n*z+a*q+t*nn,o[4]=v*F+u*P+m*D+f*X,o[5]=v*y+u*V+m*j+f*$,o[6]=v*R+u*N+m*G+f*d,o[7]=v*I+u*z+m*q+f*nn,o[8]=l*F+c*P+s*D+A*X,o[9]=l*y+c*V+s*j+A*$,o[10]=l*R+c*N+s*G+A*d,o[11]=l*I+c*z+s*q+A*nn,o[12]=h*F+w*P+T*D+S*X,o[13]=h*y+w*V+T*j+S*$,o[14]=h*R+w*N+T*G+S*d,o[15]=h*I+w*z+T*q+S*nn,o}function C(e,r,o){return o=o||new p(3),o[0]=e[0]+r[0],o[1]=e[1]+r[1],o[2]=e[2]+r[2],o}function K(e,r,o){return o=o||new p(3),o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],o}function en(e,r,o){return o=o||new p(3),o[0]=e[0]*r,o[1]=e[1]*r,o[2]=e[2]*r,o}function tn(e,r){r=r||new p(3);var o=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return o>1e-5&&(r[0]=e[0]/o,r[1]=e[1]/o,r[2]=e[2]/o),r}function pn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function an(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function O(e,r,o){return o=o||new p(3),o[0]=e[1]*r[2]-e[2]*r[1],o[1]=e[2]*r[0]-e[0]*r[2],o[2]=e[0]*r[1]-e[1]*r[0],o}function ln(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function fn(e,r){let o=e[0]-r[0],i=e[1]-r[1],n=e[2]-r[2];return o*o+i*i+n*n}function cn(e,r){return Math.sqrt(fn(e,r))}function vn(e){return e=e||new p(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mn(e,r){return r=r||new p(16),r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15],r}function hn(e,r,o,i){i=i||new p(16);var n=tn(K(e,r)),a=tn(O(o,n)),t=tn(O(n,a));return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=0,i[4]=t[0],i[5]=t[1],i[6]=t[2],i[7]=0,i[8]=n[0],i[9]=n[1],i[10]=n[2],i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i}function un(e,r,o,i,n){n=n||new p(16);var a=Math.tan(Math.PI*.5-.5*e),t=1/(o-i);return n[0]=a/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(o+i)*t,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*i*t*2,n[15]=0,n}function sn(e,r,o,i,n,a,t){return t=t||new p(16),t[0]=2/(r-e),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2/(i-o),t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2/(n-a),t[11]=0,t[12]=(e+r)/(e-r),t[13]=(o+i)/(o-i),t[14]=(n+a)/(n-a),t[15]=1,t}function En(e,r,o,i,n,a,t){t=t||new p(16);var v=r-e,u=i-o,m=a-n;return t[0]=2*n/v,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n/u,t[6]=0,t[7]=0,t[8]=(e+r)/v,t[9]=(i+o)/u,t[10]=-(a+n)/m,t[11]=-1,t[12]=0,t[13]=0,t[14]=-2*n*a/m,t[15]=0,t}function rn(e,r,o,i){return i=i||new p(16),i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=e,i[13]=r,i[14]=o,i[15]=1,i}function b(e,r,o,i,n){n=n||new p(16);var a=e[0],t=e[1],v=e[2],u=e[3],m=e[1*4+0],f=e[1*4+1],l=e[1*4+2],c=e[1*4+3],s=e[2*4+0],A=e[2*4+1],h=e[2*4+2],w=e[2*4+3],T=e[3*4+0],S=e[3*4+1],F=e[3*4+2],y=e[3*4+3];return e!==n&&(n[0]=a,n[1]=t,n[2]=v,n[3]=u,n[4]=m,n[5]=f,n[6]=l,n[7]=c,n[8]=s,n[9]=A,n[10]=h,n[11]=w),n[12]=a*r+m*o+s*i+T,n[13]=t*r+f*o+A*i+S,n[14]=v*r+l*o+h*i+F,n[15]=u*r+c*o+w*i+y,n}function x(e,r){r=r||new p(16);var o=Math.cos(e),i=Math.sin(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=o,r[6]=i,r[7]=0,r[8]=0,r[9]=-i,r[10]=o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function M(e,r,o){o=o||new p(16);var i=e[4],n=e[5],a=e[6],t=e[7],v=e[8],u=e[9],m=e[10],f=e[11],l=Math.cos(r),c=Math.sin(r);return o[4]=l*i+c*v,o[5]=l*n+c*u,o[6]=l*a+c*m,o[7]=l*t+c*f,o[8]=l*v-c*i,o[9]=l*u-c*n,o[10]=l*m-c*a,o[11]=l*f-c*t,e!==o&&(o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o}function _(e,r){r=r||new p(16);var o=Math.cos(e),i=Math.sin(e);return r[0]=o,r[1]=0,r[2]=-i,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=i,r[9]=0,r[10]=o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function g(e,r,o){o=o||new p(16);var i=e[0*4+0],n=e[0*4+1],a=e[0*4+2],t=e[0*4+3],v=e[2*4+0],u=e[2*4+1],m=e[2*4+2],f=e[2*4+3],l=Math.cos(r),c=Math.sin(r);return o[0]=l*i-c*v,o[1]=l*n-c*u,o[2]=l*a-c*m,o[3]=l*t-c*f,o[8]=l*v+c*i,o[9]=l*u+c*n,o[10]=l*m+c*a,o[11]=l*f+c*t,e!==o&&(o[4]=e[4],o[5]=e[5],o[6]=e[6],o[7]=e[7],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o}function U(e,r){r=r||new p(16);var o=Math.cos(e),i=Math.sin(e);return r[0]=o,r[1]=i,r[2]=0,r[3]=0,r[4]=-i,r[5]=o,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function W(e,r,o){o=o||new p(16);var i=e[0*4+0],n=e[0*4+1],a=e[0*4+2],t=e[0*4+3],v=e[1*4+0],u=e[1*4+1],m=e[1*4+2],f=e[1*4+3],l=Math.cos(r),c=Math.sin(r);return o[0]=l*i+c*v,o[1]=l*n+c*u,o[2]=l*a+c*m,o[3]=l*t+c*f,o[4]=l*v-c*i,o[5]=l*u-c*n,o[6]=l*m-c*a,o[7]=l*f-c*t,e!==o&&(o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o}function L(e,r,o){o=o||new p(16);var i=e[0],n=e[1],a=e[2],t=Math.sqrt(i*i+n*n+a*a);i/=t,n/=t,a/=t;var v=i*i,u=n*n,m=a*a,f=Math.cos(r),l=Math.sin(r),c=1-f;return o[0]=v+(1-v)*f,o[1]=i*n*c+a*l,o[2]=i*a*c-n*l,o[3]=0,o[4]=i*n*c-a*l,o[5]=u+(1-u)*f,o[6]=n*a*c+i*l,o[7]=0,o[8]=i*a*c+n*l,o[9]=n*a*c-i*l,o[10]=m+(1-m)*f,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Z(e,r,o,i){i=i||new p(16);var n=r[0],a=r[1],t=r[2],v=Math.sqrt(n*n+a*a+t*t);n/=v,a/=v,t/=v;var u=n*n,m=a*a,f=t*t,l=Math.cos(o),c=Math.sin(o),s=1-l,A=u+(1-u)*l,h=n*a*s+t*c,w=n*t*s-a*c,T=n*a*s-t*c,S=m+(1-m)*l,F=a*t*s+n*c,y=n*t*s+a*c,R=a*t*s-n*c,I=f+(1-f)*l,P=e[0],V=e[1],N=e[2],z=e[3],D=e[4],j=e[5],G=e[6],q=e[7],X=e[8],$=e[9],d=e[10],nn=e[11];return i[0]=A*P+h*D+w*X,i[1]=A*V+h*j+w*$,i[2]=A*N+h*G+w*d,i[3]=A*z+h*q+w*nn,i[4]=T*P+S*D+F*X,i[5]=T*V+S*j+F*$,i[6]=T*N+S*G+F*d,i[7]=T*z+S*q+F*nn,i[8]=y*P+R*D+I*X,i[9]=y*V+R*j+I*$,i[10]=y*N+R*G+I*d,i[11]=y*z+R*q+I*nn,e!==i&&(i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i}function on(e,r,o,i){return i=i||new p(16),i[0]=e,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=r,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=o,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function An(e,r,o,i,n){return n=n||new p(16),n[0]=r*e[0*4+0],n[1]=r*e[0*4+1],n[2]=r*e[0*4+2],n[3]=r*e[0*4+3],n[4]=o*e[1*4+0],n[5]=o*e[1*4+1],n[6]=o*e[1*4+2],n[7]=o*e[1*4+3],n[8]=i*e[2*4+0],n[9]=i*e[2*4+1],n[10]=i*e[2*4+2],n[11]=i*e[2*4+3],e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function yn(e,r,o,i){i=i||new p(16);let n=r[0],a=r[1],t=r[2],v=r[3],u=n+n,m=a+a,f=t+t,l=n*u,c=n*m,s=n*f,A=a*m,h=a*f,w=t*f,T=v*u,S=v*m,F=v*f,y=o[0],R=o[1],I=o[2];return i[0]=(1-(A+w))*y,i[1]=(c+F)*y,i[2]=(s-S)*y,i[3]=0,i[4]=(c-F)*R,i[5]=(1-(l+w))*R,i[6]=(h+T)*R,i[7]=0,i[8]=(s+S)*I,i[9]=(h-T)*I,i[10]=(1-(l+A))*I,i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i}function xn(e,r){let o=e[0],i=e[4],n=e[8],a=e[1],t=e[5],v=e[9],u=e[2],m=e[6],f=e[10],l=o+t+f;if(l>0){let c=.5/Math.sqrt(l+1);r[3]=.25/c,r[0]=(m-v)*c,r[1]=(n-u)*c,r[2]=(a-i)*c}else if(o>t&&o>f){let c=2*Math.sqrt(1+o-t-f);r[3]=(m-v)/c,r[0]=.25*c,r[1]=(i+a)/c,r[2]=(n+u)/c}else if(t>f){let c=2*Math.sqrt(1+t-o-f);r[3]=(n-u)/c,r[0]=(i+a)/c,r[1]=.25*c,r[2]=(v+m)/c}else{let c=2*Math.sqrt(1+f-o-t);r[3]=(a-i)/c,r[0]=(n+u)/c,r[1]=(v+m)/c,r[2]=.25*c}}function wn(e,r,o,i){let n=m4.length(e.slice(0,3)),a=m4.length(e.slice(4,7)),t=m4.length(e.slice(8,11));_n(e)<0&&(n=-n),r[0]=e[12],r[1]=e[13],r[2]=e[14];let u=m4.copy(e),m=1/n,f=1/a,l=1/t;u[0]*=m,u[1]*=m,u[2]*=m,u[4]*=f,u[5]*=f,u[6]*=f,u[8]*=l,u[9]*=l,u[10]*=l,xn(u,o),i[0]=n,i[1]=a,i[2]=t}function _n(e){var r=e[0*4+0],o=e[0*4+1],i=e[0*4+2],n=e[0*4+3],a=e[1*4+0],t=e[1*4+1],v=e[1*4+2],u=e[1*4+3],m=e[2*4+0],f=e[2*4+1],l=e[2*4+2],c=e[2*4+3],s=e[3*4+0],A=e[3*4+1],h=e[3*4+2],w=e[3*4+3],T=l*w,S=h*c,F=v*w,y=h*u,R=v*c,I=l*u,P=i*w,V=h*n,N=i*c,z=l*n,D=i*u,j=v*n,G=T*t+y*f+R*A-(S*t+F*f+I*A),q=S*o+P*f+z*A-(T*o+V*f+N*A),X=F*o+V*t+D*A-(y*o+P*t+j*A),$=I*o+N*t+j*f-(R*o+z*t+D*f);return 1/(r*G+a*q+m*X+s*$)}function B(e,r){r=r||new p(16);var o=e[0*4+0],i=e[0*4+1],n=e[0*4+2],a=e[0*4+3],t=e[1*4+0],v=e[1*4+1],u=e[1*4+2],m=e[1*4+3],f=e[2*4+0],l=e[2*4+1],c=e[2*4+2],s=e[2*4+3],A=e[3*4+0],h=e[3*4+1],w=e[3*4+2],T=e[3*4+3],S=c*T,F=w*s,y=u*T,R=w*m,I=u*s,P=c*m,V=n*T,N=w*a,z=n*s,D=c*a,j=n*m,G=u*a,q=f*h,X=A*l,$=t*h,d=A*v,nn=t*l,Sn=f*v,Fn=o*h,Mn=A*i,Rn=o*l,In=f*i,Bn=o*v,Cn=t*i,Ln=S*v+R*l+I*h-(F*v+y*l+P*h),Pn=F*i+V*l+D*h-(S*i+N*l+z*h),Vn=y*i+N*v+j*h-(R*i+V*v+G*h),Nn=P*i+z*v+G*l-(I*i+D*v+j*l),k=1/(o*Ln+t*Pn+f*Vn+A*Nn);return r[0]=k*Ln,r[1]=k*Pn,r[2]=k*Vn,r[3]=k*Nn,r[4]=k*(F*t+y*f+P*A-(S*t+R*f+I*A)),r[5]=k*(S*o+N*f+z*A-(F*o+V*f+D*A)),r[6]=k*(R*o+V*t+G*A-(y*o+N*t+j*A)),r[7]=k*(I*o+D*t+j*f-(P*o+z*t+G*f)),r[8]=k*(q*m+d*s+nn*T-(X*m+$*s+Sn*T)),r[9]=k*(X*a+Fn*s+In*T-(q*a+Mn*s+Rn*T)),r[10]=k*($*a+Mn*m+Bn*T-(d*a+Fn*m+Cn*T)),r[11]=k*(Sn*a+Rn*m+Cn*s-(nn*a+In*m+Bn*s)),r[12]=k*($*c+Sn*w+X*u-(nn*w+q*u+d*c)),r[13]=k*(Rn*w+q*n+Mn*c-(Fn*c+In*w+X*n)),r[14]=k*(Fn*u+Cn*w+d*n-(Bn*w+$*n+Mn*u)),r[15]=k*(Bn*c+nn*n+In*u-(Rn*u+Cn*c+Sn*n)),r}function bn(e,r,o){o=o||new p(4);for(var i=0;i<4;++i){o[i]=0;for(var n=0;n<4;++n)o[i]+=r[n]*e[n*4+i]}return o}function J(e,r,o){o=o||new p(3);var i=r[0],n=r[1],a=r[2],t=i*e[0*4+3]+n*e[1*4+3]+a*e[2*4+3]+e[3*4+3];return o[0]=(i*e[0*4+0]+n*e[1*4+0]+a*e[2*4+0]+e[3*4+0])/t,o[1]=(i*e[0*4+1]+n*e[1*4+1]+a*e[2*4+1]+e[3*4+1])/t,o[2]=(i*e[0*4+2]+n*e[1*4+2]+a*e[2*4+2]+e[3*4+2])/t,o}function Q(e,r,o){o=o||new p(3);var i=r[0],n=r[1],a=r[2];return o[0]=i*e[0*4+0]+n*e[1*4+0]+a*e[2*4+0],o[1]=i*e[0*4+1]+n*e[1*4+1]+a*e[2*4+1],o[2]=i*e[0*4+2]+n*e[1*4+2]+a*e[2*4+2],o}function On(e,r,o){o=o||new p(3);var i=B(e),n=r[0],a=r[1],t=r[2];return o[0]=n*i[0*4+0]+a*i[0*4+1]+t*i[0*4+2],o[1]=n*i[1*4+0]+a*i[1*4+1]+t*i[1*4+2],o[2]=n*i[2*4+0]+a*i[2*4+1]+t*i[2*4+2],o}function gn(e,r){return r=r||new p(16),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}return{copy:gn,lookAt:hn,addVectors:C,subtractVectors:K,scaleVector:en,distance:cn,distanceSq:fn,normalize:tn,compose:yn,cross:O,decompose:wn,dot:ln,identity:vn,transpose:mn,length:pn,lengthSq:an,orthographic:sn,frustum:En,perspective:un,translation:rn,translate:b,xRotation:x,yRotation:_,zRotation:U,xRotate:M,yRotate:g,zRotate:W,axisRotation:L,axisRotate:Z,scaling:on,scale:An,multiply:Y,inverse:B,transformVector:bn,transformPoint:J,transformDirection:Q,transformNormal:On,setDefaultType:E}})});var Tn=Dn(kn()),H=Dn(Yn());"use strict";console.log(H.m4);Number.prototype.map=function(p,E,Y,C){return(this-p)*(C-Y)/(E-p)+Y};function Jn(p){let E=[[0,0,0]],Y=[[0,0]],C=[[0,0,0]],K=[[0,0,0]],en=[E,Y,C,K],tn=[[],[],[],[]],pn=[],an=[],O,ln=["default"],fn="default",cn="default",vn=()=>{};function mn(){O&&O.data.position.length&&(O=void 0)}function hn(){if(!O){let b=[],x=[],M=[],_=[];tn=[b,x,M,_],O={object:cn,groups:ln,material:fn,data:{position:b,texcoord:x,normal:M,color:_}},an.push(O)}}function un(b){b.split("/").forEach((M,_)=>{if(!M)return;let g=parseInt(M),U=g+(g>=0?0:en[_].length);tn[_].push(...en[_][U]),_===0&&K.length>1&&O.data.color.push(...K[U])})}let sn={v(b){b.length>3?(E.push(b.slice(0,3).map(parseFloat)),K.push(b.slice(3).map(parseFloat))):E.push(b.map(parseFloat))},vn(b){C.push(b.map(parseFloat))},vt(b){Y.push(b.map(parseFloat))},f(b){hn();let x=b.length-2;for(let M=0;M<x;++M)un(b[0]),un(b[M+1]),un(b[M+2])},s:vn,mtllib(b,x){pn.push(x)},usemtl(b,x){fn=x,mn()},g(b){ln=b,mn()},o(b,x){cn=x,mn()}},En=/(\w*)(?: )*(.*)/,rn=p.split(`
`);for(let b=0;b<rn.length;++b){let x=rn[b].trim();if(x===""||x.startsWith("#"))continue;let M=En.exec(x);if(!M)continue;let[,_,g]=M,U=x.split(/\s+/).slice(1),W=sn[_];if(!W){console.warn("unhandled keyword:",_);continue}W(U,g)}for(let b of an)b.data=Object.fromEntries(Object.entries(b.data).filter(([,x])=>x.length>0));return{geometries:an,materialLibs:pn}}async function Qn(){let E=document.querySelector("#canvas").getContext("webgl");if(!E)return;let Y=`
  attribute vec4 a_position;
  attribute vec3 a_normal;
  attribute vec4 a_color;
  attribute vec2 texCoord;
 
  varying vec2 texCoordV;

  uniform mat4 u_projection;
  uniform mat4 u_view;
  uniform mat4 u_world;

  varying vec3 v_normal;
  varying vec4 v_color;

  void main() {
    gl_Position = u_projection * u_view * u_world * a_position;
    texCoordV = texCoord;
    v_normal = mat3(u_world) * a_normal;
    v_color = a_color;
  }
  `,C=`
  precision highp float;

  varying vec3 v_normal;
  varying vec4 v_color;
  varying vec2 texCoordV;

  uniform vec4 u_diffuse;
  uniform vec3 u_lightDirection;
  
  uniform vec2 u_mouse;
  uniform float u_height;
  uniform float u_time;
  uniform vec2 u_resolution;
  mat3 yuv2rgb = mat3(0.7, 0.0, 1.13983,
    1.0, -0.39465, -0.58060,
    1.0, 2.03211, 0.0);

  // RGB to YUV matrix
  mat3 rgb2yuv = mat3(0.2126, 0.7152, 0.0722,
      -0.09991, -0.33609, 0.43600,
      0.615, -0.5586, -0.05639);

  void main(){
    vec3 normal = normalize(v_normal);
    vec2 st = gl_FragCoord.xy/u_resolution * normal.z;
    vec3 color = vec3(0.0);

    // UV values goes from -1 to 1
    // So we need to remap st (0.0 to 1.0)
    st -= 0.5;  // becomes -0.5 to 0.5
    st *= 2.0;  // becomes -1.0 to 1.0

    // we pass st as the y & z values of
    // a three dimensional vector to be
    // properly multiply by a 3x3 matrix
    color = yuv2rgb * vec3(abs(sin(u_time * 0.5)), st.x * (u_height + 1.0), 0.1);

    gl_FragColor = vec4(color,1.0);
  }
    
  `,K=function(_,g){E.canvas.width=0+window.scrollY.map(0,g,1440,1075),E.canvas.height=0+window.scrollY.map(0,g,692,516.96),document.getElementById("number_purple").innerHTML=_>=15?`${_}s or ${_-15}s longer than average`:`${_}s`};console.log(window.performance.getEntriesByType("navigation")[0]);let en=Tn.webglUtils.createProgramInfo(E,[Y,C]),pn=await(await fetch("/GL/iphone11.txt")).text(),an=Jn(pn),O=an.geometries.map(({data:_})=>{_.color?_.position.length===_.color.length&&(_.color={numComponents:3,data:_.color}):_.color={value:[1,1,1,1]};let g=Tn.webglUtils.createBufferInfoFromArrays(E,_);return{material:{u_diffuse:[1,1,1,1]},bufferInfo:g}});function ln(_){let g=_.slice(0,3),U=_.slice(0,3);for(let W=3;W<_.length;W+=3)for(let L=0;L<3;++L){let Z=_[W+L];g[L]=Math.min(Z,g[L]),U[L]=Math.max(Z,U[L])}return{min:g,max:U}}function fn(_){return _.reduce(({min:g,max:U},{data:W})=>{let L=ln(W.position);return{min:g.map((Z,on)=>Math.min(L.min[on],Z)),max:U.map((Z,on)=>Math.max(L.max[on],Z))}},{min:Array(3).fill(Number.POSITIVE_INFINITY),max:Array(3).fill(Number.NEGATIVE_INFINITY)})}let cn=fn(an.geometries),vn=H.m4.subtractVectors(cn.max,cn.min),mn=H.m4.scaleVector(H.m4.addVectors(cn.min,H.m4.scaleVector(vn,.5)),-1),hn=[-.1,.05,0],un=H.m4.length(vn)*1.2,sn=un/100,En=un*3,rn=new Float32Array(2),b=E.getUniformLocation(en.program,"u_resolution");function x(_){return _*Math.PI/180}function M(_){_*=.001;let g=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight;(function(){document.onmousemove=_n;function _n(B){var bn,J,Q;B=B||window.event,B.pageX==null&&B.clientX!=null&&(bn=B.target&&B.target.ownerDocument||document,J=bn.documentElement,Q=bn.body,B.pageX=B.clientX+(J&&J.scrollLeft||Q&&Q.scrollLeft||0)-(J&&J.clientLeft||Q&&Q.clientLeft||0),B.pageY=B.clientY+(J&&J.scrollTop||Q&&Q.scrollTop||0)-(J&&J.clientTop||Q&&Q.clientTop||0)),rn[0]=B.pageX*.001,rn[1]=B.pageY*.001}})();let U=H.m4.addVectors(hn,[0,0,un-window.scrollY.map(0,g,0,1.89)]);Math.floor(_*2)%2==0&&K(Math.floor(_),g),E.viewport(0,0,E.drawingBufferWidth,E.drawingBufferHeight),E.enable(E.DEPTH_TEST),E.clearColor(.067,.075,.11,1),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT);let W=x(60),L=E.canvas.clientWidth/E.canvas.clientHeight,Z=H.m4.perspective(W,L,sn,En),on=[0,1,0],An=H.m4.lookAt(U,hn,on),yn=H.m4.inverse(An),xn={u_lightDirection:H.m4.normalize([-1,2,5]),u_view:yn,u_projection:Z,u_time:_,u_height:window.scrollY.map(0,g,0,1),u_mouse:rn};E.useProgram(en.program),E.uniform2f(b,E.canvas.width,E.canvas.height),Tn.webglUtils.setUniforms(en,xn);let wn=H.m4.multiply(H.m4.yRotation(window.scrollY.map(0,g,0,6.5)+rn[0]*.15),H.m4.xRotation(rn[1]*.1));wn=H.m4.translate(wn,...mn);for(let{bufferInfo:_n,material:B}of O)Tn.webglUtils.setBuffersAndAttributes(E,en,_n),Tn.webglUtils.setUniforms(en,{u_world:wn,u_diffuse:B.u_diffuse}),Tn.webglUtils.drawBufferInfo(E,_n);requestAnimationFrame(M)}requestAnimationFrame(M)}Qn();})();
